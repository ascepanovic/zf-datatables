jQuery.expr[":"].focus=function(elem){return elem===document.activeElement&&(elem.type||elem.href)};$.editable.addInputType("ui-datepicker",{element:function(settings,original){var form=$(this),input=$("<input />");input.attr("autocomplete","off");form.append(input);return input},plugin:function(settings,original){var form=this,input=form.find("input");settings.onblur="nothing";datepicker={onSelect:function(){form.submit()},onClose:function(){setTimeout(function(){if(!input.is(":focus")){original.reset(form)}else{form.submit()}},150)}};if(settings.datepicker){jQuery.extend(datepicker,settings.datepicker)}input.datepicker(datepicker)}});